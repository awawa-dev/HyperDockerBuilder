ARG LINUX_VERSION
ARG DOCKER_SOURCE
ARG BUILD_DESC
FROM ${LINUX_VERSION}
ARG LINUX_VERSION
ARG DOCKER_SOURCE
ARG BUILD_DESC

LABEL maintainer="HyperHDR" \
	org.opencontainers.image.title="${LINUX_VERSION}" \
	org.opencontainers.image.description="HyperHDR build environment ${BUILD_DESC}" \
	org.opencontainers.image.url="https://github.com/awawa-dev" \
	org.opencontainers.image.source="https://github.com/awawa-dev/HyperHDR.dev.docker" \
	org.opencontainers.image.vendor="HyperHDR"

# install hyperhdr deps packages
#RUN sudo dnf check-update
#RUN sudo dnf upgrade
#RUN sudo dnf group install "C Development Tools and Libraries" "Development Tools"
RUN sudo dnf -y install \
	cmake \
	git \
	alsa-lib-devel \
	libegl-dev \
	libftdi1-dev \
	libgl-dev \
	libglvnd-dev \
	libpipewire-0.3-dev \
	qt5-qtserialport-devel \
	libqt5sql5-sqlite \
	libqt5svg5-dev \
	libqt5x11extras5-dev \
	libssl-dev \
	libturbojpeg0-dev \
	libusb-1.0-0-dev \
	libx11-dev \
	libzstd-dev \
	nasm \
	pkg-config \
	python3-minimal \
	qtbase5-dev \
	qdbus-qt5 \
	wget

RUN mkdir -p /scripts
COPY build.sh /scripts
WORKDIR /scripts
RUN chmod +x build.sh
RUN ./build.sh

